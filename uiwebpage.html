<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
		</script>
		<script>

			var $isCourses = false;
			var $isRooms = false;
			var $isScheduling = false;
			var $isExplorer = false;
			var $counter = 0;

			//call yarn start the start the server first

			function toggling() {
			//$(document).ready(function(){
				if ($(".dataset").val() == "default") {

                    $(".coursesAndOrClass").hide()
                    $(".ifcoursesFilters").hide();
                    $(".ifroomsFilters").hide();
                    $(".ifgroupFilters").hide();
					$(".ifcourses").hide();
					$(".ifrooms").hide();
					$(".ifgroup").hide();
					$isCourses = false;
					$isRooms = false;
                    $(".ifcoursesGroup").hide();
                    $(".ifroomsGroup").hide();
                    $(".ifgroupGroup").hide();

                    $(".ifcoursesApply").hide();

                    $(".ifcoursesExtraInfo").hide();

				}
				if ($(".dataset").val() == "courses") {

                    $(".coursesAndOrClass").show()
                    $(".ifcoursesFilters").show();
                    $(".roomsFilterSchedule").hide(); //this is the new AndOr banner
                    $(".ifroomsFilters").hide();
                    $(".ifgroupFilters").show();
					$(".ifcourses").show();
					$(".ifrooms").hide();
					$(".ifgroup").show(); //this is no longer keyed to the AndOr banner
                    $isCourses = true;
                    $isRooms = false;
                    $(".ifcoursesGroup").show();
                    $(".ifroomsGroup").hide();
                    $(".ifgroupGroup").show();

                    $(".ifcoursesApply").show();

                    $(".ifcoursesExtraInfo").show();


				}
				if ($(".dataset").val() == "rooms") {

                    $(".coursesAndOrClass").hide()
                    $(".roomsFilterSchedule").show();
				    $(".ifcoursesFilters").hide();
                    $(".ifroomsFilters").show();
                    $(".ifgroupFilters").show();
					$(".ifcourses").hide();
					$(".ifrooms").show();
					$(".ifgroup").show();
                    $isCourses = false;
                    $isRooms = true;
                    $(".ifcoursesGroup").hide();
                    $(".ifroomsGroup").show();
                    $(".ifgroupGroup").show();

                    $(".ifcoursesApply").hide();

                    $(".ifcoursesExtraInfo").hide();
				}
			//})
		}
		function columnLeadsGroupBy(coursesOrRooms){
            var coursesColVals = [];
            var coursesColTexts = [];
            $('.'+coursesOrRooms+' :selected').each(function(k, selected){
                coursesColVals[k] = $(selected).val();
                coursesColTexts[k] = $(selected).text();
            });

            //ifcourses ifrooms
			if (coursesOrRooms = "ifcourses") {
            	orderDropdownAccordingToCol(".ifcoursesGroup",coursesColVals,coursesColTexts);
			}
            if (coursesOrRooms = "ifrooms") {
                orderDropdownAccordingToCol(".ifroomsGroup",coursesColVals,coursesColTexts);
            }
        }

            function orderDropdownAccordingToCol(ifcoursesOrroomsGroup,listOfCoursesCol,listOfCoursesColText) {
				$(ifcoursesOrroomsGroup).find('option').remove();
                $(ifcoursesOrroomsGroup).append('<option value="default" selected>Please select columns above to show before ordering</option>');
                for (var i = 0; i < listOfCoursesCol.length; i++) {
                    if (listOfCoursesColText[i] != "") {
                        $(ifcoursesOrroomsGroup).append('<option class = "orderDrop"></option>');
                        var newClassName = "order" + i;
                        $(".orderDrop").addClass(newClassName);
                        $("." + newClassName).val(listOfCoursesCol[i]);
                        $("." + newClassName).html(listOfCoursesColText[i]);
                        $(".orderDrop").removeClass("orderDrop").addClass("orderPassed"); //this order is considered, and will be deleted
                    }
				}
            }

		function clickAddCat() {
                //e.preventDefault();
                var $cloned = $(".test").clone().removeClass("test").addClass("clonedTest");
                $cloned.appendTo(".extra");
        }
        function clickAddOrd() {
            //e.preventDefault();
            var $cloned = $(".testOrder").clone().removeClass("testOrder").addClass("clonedTestOrder");
            $cloned.appendTo(".extraOrder");
        }

        var notBlankAttrCounter = 0;

		function addLeftAsterisk(customClass) {
		    var randomStr = "";


		    if ($("." + customClass + " :selected").val() == "EW"
			|| $("." + customClass + " :selected").val() == "CT") {// Ends with--> *lish
                randomStr = randomStr + "*";
            }
            return randomStr;
		}

		function addRightAsterisk(customClass) {
                var randomStr = "";
                if ($("." + customClass + " :selected").val() == "SW"
                    || $("." + customClass + " :selected").val() == "CT") { //starts with--> Eng*
                    randomStr = randomStr + "*";
                }
                return randomStr;
            }


            function comparison(compareSizeAttr) {//Returns LT, EQ or GT
				//compareSizeAttr
		    	var ranstr = ""
                if ($("." +compareSizeAttr+ " :selected").val() == "LT") {
                    ranstr = ranstr + "LT";
                }
                if ($("." +compareSizeAttr+ " :selected").val() == "EQ") {
                    ranstr = ranstr + "EQ";
                }
                if ($("." +compareSizeAttr+ " :selected").val() == "GT") {
                    ranstr = ranstr + "GT";
                }
                return ranstr;
			}

            function stringObjectOfAttr() {
		    //Case 1: Just 1 field is being filled
				//Case 2: AND multifields
				//Case 3: OR multifields
                var $jsonstr = "";
				if ($isCourses) {
                    var attrCounter = 0; //counts the number of attributes that are not blank
                    var lastAttrCounter = 0;//identifies whether the last attribute has been reach, if yes, don't insert ","
                    if ($("#courses_sectionsize").val() != "") {
                        attrCounter++;
                    }
                    if ($("#courses_dept").val() != "") {
                        attrCounter++;
                    }
                    if ($("#courses_id").val() != "") {
                        attrCounter++;
                    }
                    if ($("#courses_instructor").val() != "") {
                        attrCounter++;
                    }
                    if ($("#courses_title").val() != "") {
                        attrCounter++;
                    }
                    notBlankAttrCounter = attrCounter;

                    if (attrCounter > 0) {

                        if ($("#courses_sectionsize").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"" + comparison("compareSizeSection") + "\": {" +
                                "\"courses_sectionsize\": " + $("#courses_sectionsize").val()
                                + "}" +
                                "}";

                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#courses_dept").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"courses_dept\": \"" + addLeftAsterisk("isItDep") + $("#courses_dept").val() + addRightAsterisk("isItDep") + "\""
                                + "}" +
                                "}";
                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#courses_id").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"courses_id\": \"" + addLeftAsterisk("isItCn") + $("#courses_id").val() + addRightAsterisk("isItCn") + "\""
                                + "}" +
                                "}";
                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#courses_instructor").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"courses_instructor\": \"" + addLeftAsterisk("isItIns") + $("#courses_instructor").val() + addRightAsterisk("isItIns") + "\""
                                + "}" +
                                "}";
                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#courses_title").val() != "") {
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"courses_title\": \"" + addLeftAsterisk("isItTit") + $("#courses_title").val() + addRightAsterisk("isItTit") + "\""
                                + "}" +
                                "}";
                        }
                    }
                }
                console.log($isCourses);
                console.log($isRooms);
                if ($isRooms) {
                    var attrCounter = 0; //counts the number of attributes that are not blank
                    var lastAttrCounter = 0;//identifies whether the last attribute has been reach, if yes, don't insert ","
                    if ($("#rooms_fullname").val() != "") {
                        attrCounter++;
                    }
                    if ($("#rooms_furniture").val() != "") {
                        attrCounter++;
                    }
                    if ($("#rooms_loc").val() != "") {
                        attrCounter++;
                    }
                    if ($("#rooms_number").val() != "") {
                        attrCounter++;
                    }
                    if ($("#rooms_seats").val() != "") {
                        attrCounter++;
                    }
					if ($("#rooms_type").val() != "") {
						attrCounter++;
					}
                    notBlankAttrCounter = attrCounter;

                    if (attrCounter > 0) {

                        if ($("#rooms_fullname").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"rooms_fullname\": \"" + addLeftAsterisk("isItFullname") + $("#rooms_fullname").val() + addRightAsterisk("isItFullname") + "\""
                                + "}" +
                                "}";
                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#rooms_number").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"rooms_number\": \"" + addLeftAsterisk("isItNumber") + $("#rooms_number").val() + addRightAsterisk("isItNumber") + "\""
                                + "}" +
                                "}";
                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#rooms_seats").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"" + comparison("compareSizeSize") + "\": {" +
                                "\"rooms_seats\": " + $("#rooms_seats").val()
                                + "}" +
                                "}";

                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#rooms_type").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"rooms_type\": \"" + addLeftAsterisk("isItType") + $("#rooms_type").val() + addRightAsterisk("isItType") + "\""
                                + "}" +
                                "}";
                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#rooms_furniture").val() != "") {
                            lastAttrCounter++;
                            $jsonstr = $jsonstr +
                                "{" +
                                "\"IS\": {" +
                                "\"rooms_furniture\": \"" + addLeftAsterisk("isItFurniture") + $("#rooms_furniture").val() + addRightAsterisk("isItFurniture") + "\""
                                + "}" +
                                "}";
                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                        if ($("#rooms_loc").val() != "") {
                            lastAttrCounter++;
                            $jsonstr //unsure what's rooms_loc

                            if (lastAttrCounter < attrCounter) {
                                $jsonstr = $jsonstr + ",";
                            }
                        }
                    }
                }
                return $jsonstr;
            }

            function stringWrapWithAndOr(attrJsString) {
				var $jstring = "";
				if (notBlankAttrCounter > 1) {
                    if ($(".radioclass :checked").val() == "AND") {
                        $jstring = "{\"AND\":[" + attrJsString + "]}";
                    }
                    if ($(".radioclass :checked").val() == "OR") {
                        $jstring = "{\"OR\":[" + attrJsString + "]}";
                    }
                } else {
				    $jstring = attrJsString; //it's unnecessary to return and/or if there's only 0/1 attr
				}
				return $jstring;

			}


			function declareDirection() {
		    	if ($(".direction :selected").val() == "UP") {
		    	    return "\"UP\""
				}
                if ($(".direction :selected").val() == "DOWN") {
                    return "\"DOWN\""
                }
                if ($(".direction :selected").val() == "choose") {
                    return ""
                }
			}

			function detectDuplicatesSendAlertElseSend(customClass,coursesColVals,alertCat) {
                var coursesColTexts = [];

                $('.' + customClass + ' :selected').each(function(k, selected){
                    coursesColVals[k] = $(selected).val();
                    coursesColTexts[k] = $(selected).text();
                });

                var sortedCoursesColTexts = coursesColTexts.slice().sort();

                var duplicatedResults = [];
                for (var i = 0; i < coursesColVals.length - 1; i++) {
                    if (sortedCoursesColTexts[i+1] == sortedCoursesColTexts[i]
                        && !duplicatedResults.includes(sortedCoursesColTexts[i])
                        && sortedCoursesColTexts[i] != ""
						&& sortedCoursesColTexts[i] != "Please select columns above to show before ordering") { //ignore duplicate white spaces
                        duplicatedResults.push(sortedCoursesColTexts[i]);
                    }
                }
                if (duplicatedResults.length > 0){
                    alert(duplicatedResults.toString() + " is/are selected in \'"+ alertCat +"\' multiple times, please just select once.");
                    return;
                }

                //^duplicates are eliminated in this stage^


                for (var i = 0; i < coursesColVals.length; i++) {
                    if (coursesColVals[i] == 'default') { //eliminate default
                        coursesColVals.splice(i,1);//delete 1 element starting from index i
                        coursesColTexts.splice(i,1);
                        i = i - 1; //after deleting one index, I should go backwards by one to proceed to the next one, so that it won't skip
                    } else {
                        coursesColVals[i] = "\"" + coursesColVals[i] + "\"";//add brackets so it can fit into json format
                    }
                }
                return coursesColVals;

                //^"" like defaults are eliminated in this stage^
			}

			//JUST FOR COURSES
			function transformationMaker() {
		    	var querystr = "";
				if ($(".highestavg").is(":checked")
				    || $(".lowestavg").is(":checked")
				|| $(".mostsec").is(":checked")
					|| $(".mostpass").is(":checked")
                   || $(".mostfail").is(":checked")) {
		    	    querystr = '"TRANSFORMATIONS": {"GROUP": ["courses_dept","courses_id"],"APPLY": [' + applyMaker() + ']}'
				}
				return querystr
			}

            //JUST FOR COURSES
			function applyMaker() {
                var attrCounter = 0; //counts the number of attributes that are checked
                var lastAttrCounter = 0;//identifies whether the last attribute has been reach, if yes, don't insert ","
				if ($(".highestavg").is(":checked")) {attrCounter++;}
                if ($(".lowestavg").is(":checked")) {attrCounter++;}
                if ($(".mostsec").is(":checked")) {attrCounter++;}
                if ($(".mostpass").is(":checked")) {attrCounter++;}
                if ($(".mostfail").is(":checked")) {attrCounter++;}

		    	var querystr = "";
		    	if ($(".highestavg").is(":checked")) {
                    querystr = querystr + '{"HighestAverage": {"MAX": "courses_avg"}}';
                    lastAttrCounter++;
                    if (lastAttrCounter < attrCounter) {
                        querystr = querystr + ', '
					}
				}
                if ($(".lowestavg").is(":checked")) {
                    querystr = querystr + '{"LowestAverage": {"MIN": "courses_avg"}}'
                    lastAttrCounter++;
                    if (lastAttrCounter < attrCounter) {
                        querystr = querystr + ', '
                    }
                }
                if ($(".mostsec").is(":checked")) {
                    querystr = querystr + '{"MostSections": {"COUNT": "courses_id"}}'
                    lastAttrCounter++;
                    if (lastAttrCounter < attrCounter) {
                        querystr = querystr + ', '
                    }
                }
                if ($(".mostpass").is(":checked")) {
                    querystr = querystr + '{"MostPasses": {"MAX": "courses_pass"}}'
                    lastAttrCounter++;
                    if (lastAttrCounter < attrCounter) {
                        querystr = querystr + ', '
                    }
                }
                if ($(".mostfail").is(":checked")) {
                    querystr = querystr + '{"MostFails": {"MAX": "courses_fail"}}'
                }
                return querystr;
			}

			function queryMaker(andOr,coursesColVal,direction,coursesOrderVal,transformation) {
				var query ="{";
				if (coursesColVal == "") {
				    alert("Please select the columns to display")
					return "";
				}
				if (andOr != "") {
                query = query + '"WHERE": ' + andOr + ', '
				}

				query = query + '"OPTIONS": {"COLUMNS": [' + coursesColVal + ']'

				if (direction == "" && coursesOrderVal.length == 1) {
                    query = query + ', "ORDER":' +  coursesOrderVal.toString()
                }
                if (direction == "" && coursesOrderVal.length > 1) {
                    alert("Please select the direction for more than one orderings")
                    return "";
				}
				if (direction != "" && coursesOrderVal.length > 0) {
                    query = query + ', "ORDER": {"dir": ' + direction + ', "keys": [' + coursesOrderVal.toString() + ']}'
                }

				query = query + ', "FORM": "TABLE"}'

				if (transformation != "") {query = query + ',' + transformation}
					//close'em up
				query = query + '}';

				return query;

			}


        function generateData() {
            if ($isCourses) {
				//for filters

				    //TODO: rename classes for different parts, so that they can be more distinct
                //for courses column

				var coursesColVals = [];
				var coursesOrderVals = [];
                coursesColVals = detectDuplicatesSendAlertElseSend("ifcourses",coursesColVals,"Show column(s)");
                coursesOrderVals = detectDuplicatesSendAlertElseSend("ifcoursesGroup",coursesOrderVals,"Order by");



				var $andOrString = stringObjectOfAttr();  //for filter: organize attributes into jsonstring
            $andOrString = stringWrapWithAndOr($andOrString); //wrap it with and/or

            //for order
				var $order = $(".ifcoursesGroup :selected").val();

            var $andor1 = $(".radioclass :checked").val();

            //console.log("andOrString: " + $andOrString);
            //console.log("coursesColVals.toString(): " + coursesColVals.toString());
            //console.log("order: " + $order);
            //console.log("coursesOrderVals.toString(): " + coursesOrderVals.toString());
            //console.log("dir: " + declareDirection());
            //console.log("transformationMaker(): " + transformationMaker());


            var $officialQueryString = queryMaker($andOrString,coursesColVals.toString(),declareDirection(),coursesOrderVals,transformationMaker());
            console.log("officialQueryString (courses): " + $officialQueryString);
            //if there is no filter
				var coursesFiltersInputCounter = 0;
				$(".ifcoursesFilters input").each(function() {
				    coursesFiltersInputCounter++;
				});

				var emptyCoursesFilterCounter = 0;
                $(".ifcoursesFilters input").each(function() {
                    if ($(this).val() == "") {
                        emptyCoursesFilterCounter++;
					}
                });

                if (coursesFiltersInputCounter == emptyCoursesFilterCounter) {
                    alert("Please insert some Courses Filter(s) before creating the table");
                    return;
				}


                //if the queryString failed to be made
            if ($officialQueryString == "") {
                return;
			}

			var $queryFormat = JSON.parse($officialQueryString);


            //console.log("qq" + $queryFormat);
            //console.log("qqq" + JSON.stringify($queryFormat));

            //create the format here, then yarn start and send request to the server

            $.ajax({
                url: "http://localhost:4321/query",
                type: 'POST',
                data: $officialQueryString,
                dataType: 'json', //data is already in json format
                contentType: 'application/json'
            }).done(function(data) {
                console.log("Response", data);
                //generateTable(data.result);
			}).fail(function(e) {
			    console.error("ERROR - Failed to submit query", e);

                //window.print("ERROR - Failed to submit query", e)
			});

                /*$.ajax('/query',
					{
                    type: 'POST',
                    data: $queryFormat,
						contentType: 'application/json',
                    dataType: 'json'
                }).done(function(data) {
                    console.log("Response", data);
                }).fail(function(e) {
                    console.error("ERROR - Failed to submit query", e);
                });*/


            /*$.post("http://localhost:4321/query",$queryFormat,function(data) {
                alert("here");
                fulfill(data);
			},"jsonp");*/
			}


            if ($isRooms) {
                var roomsColVals = [];
                $('.ifrooms :selected').each(function(l, selected){
                    roomsColVals[l] = $(selected).val();
                });

                var roomsColVals = [];
                var roomsOrderVals = [];
                roomsColVals = detectDuplicatesSendAlertElseSend("ifrooms",roomsColVals,"Show column(s)");
                roomsOrderVals = detectDuplicatesSendAlertElseSend("ifroomsGroup",roomsOrderVals,"Order by");

                var $andOrString = stringObjectOfAttr();  //for filter: organize attributes into jsonstring
                $andOrString = stringWrapWithAndOr($andOrString); //wrap it with and/or

				console.log($andOrString);

                var $officialQueryString = queryMaker($andOrString,roomsColVals.toString(),declareDirection(),roomsOrderVals,"");

                console.log("officialQueryString (rooms): " + $officialQueryString);
                //if there is no filter
                var roomsFiltersInputCounter = 0;
                $(".ifroomsFilters input").each(function() {
                    roomsFiltersInputCounter++;
                });

                var emptyRoomsFilterCounter = 0;
                $(".ifroomsFilters input").each(function() {
                    if ($(this).val() == "") {
                        emptyRoomsFilterCounter++;
                    }
                });

                if (roomsFiltersInputCounter == emptyRoomsFilterCounter) {
                    alert("Please insert some Rooms Filter(s) before creating the table");
                    return;
                }


                //if the queryString failed to be made
                if ($officialQueryString == "") {
                    return;
                }

                $.ajax({
                    url: "http://localhost:4321/query",
                    type: 'POST',
                    data: $officialQueryString,
                    dataType: 'json', //data is already in json format
                    contentType: 'application/json'
                }).done(function(data) {
                    console.log("Response", data);
                    //generateTable(data.result);
                }).fail(function(e) {
                    console.error("ERROR - Failed to submit query", e);

                    //window.print("ERROR - Failed to submit query", e)
                });

            }
		}

		// TODO: group by can only be set if it exists in column

			//JON's Code

            function explorerOrScheduler(){
                //var dataset = document.getElementsByClassName("dataset")[0];
                if($(".explorerOrScheduler").val() == "default"){
					//console.log(dataset.toString());
					$(".explorerBanner").hide()
                    //dataset.style.visibility = "hidden";
                    //$(".dataset").hide();
                    $isScheduling = false;
                    $isExplorer = false;

                    $(".coursesAndOrClass").hide();
                    $(".roomsFilterSchedule").hide();
                    $(".ifcoursesFilters").hide();
                    $(".ifroomsFilters").hide();
                    $(".ifgroupFilters").hide();
                    $(".ifcourses").hide();
                    $(".ifrooms").hide();
                    $(".ifgroup").hide();
                    $isCourses = false;
                    $isRooms = false;
                    $(".ifcoursesGroup").hide();
                    $(".ifroomsGroup").hide();
                    $(".ifgroupGroup").hide();

                    $(".ifcoursesApply").hide();
                }
                if($(".explorerOrScheduler").val() == "explorer"){
                    //console.log(dataset.toString());
                    $(".explorerBanner").show()
                    //dataset.style.visibility = "visible";
                    $(".coursesAndOrClass").hide();
                    $(".roomsFilterSchedule").hide();
                    $(".ifcoursesFilters").hide();
                    $(".ifroomsFilters").hide();
                    $(".ifgroupFilters").hide();
                    $(".ifcourses").hide();
                    $(".ifrooms").hide();
                    $(".ifgroup").hide();
                    $isScheduling = false;
                    $isExplorer = true;
                    $isCourses = false;
                    $isRooms = false;
                    $(".ifcoursesGroup").hide();
                    $(".ifroomsGroup").hide();
                    $(".ifgroupGroup").hide();

                    $(".ifcoursesApply").hide();
                }
                if($(".explorerOrScheduler").val() == "scheduler"){
                    //console.log(dataset.toString());
                    $(".explorerBanner").hide()
                    //dataset.style.visibility = "hidden";
                    $isScheduling = true;
                    $isExplorer = false;
                    $(".coursesAndOrClass").show();
                    $(".roomsFilterSchedule").show();
                    $(".ifcoursesFilters").show();
                    $(".ifroomsFilters").show();
                    $(".ifgroupFilters").hide();
                    $(".roomsFilterSchedule").show()
                    $(".ifcourses").hide();
                    $(".ifrooms").hide();
                    $(".ifgroup").show();

                    $isCourses = false;
                    $isRooms = false;
                    $(".ifcoursesGroup").hide();
                    $(".ifroomsGroup").hide();
                    $(".ifgroupGroup").hide();
                    $(".ifcoursesApply").hide();
                }
            }

		</script>
	</head>
	<body>
	<style type="text/css">
		.heading{
			color:midnightblue;
		}
	</style>
		<h1 class = "heading" >InsightUBC Tool</h1>
		<div class = "fields">
			<p><!-- Jon's code -->
				<b>Tool Mode:</b>
				<select class = "explorerOrScheduler" onchange="explorerOrScheduler()">
					<option value = "default" selected></option>
					<option value = "explorer">Courses and Rooms Explorer</option>
					<option value = "scheduler">Scheduler</option>
				</select>
			</p><!-- Jon's code -->
			<p class = "explorerBanner" style="display:none">
				<b>Courses or Rooms: </b>
				<select class = "dataset" onchange="toggling();">
					<option value="default" selected></option>
					<option value="courses">Courses</option>
					<option value="rooms">Rooms</option>
				</select>

			</p>

			<p>
				<span class = "coursesAndOrClass radioclass" style="display:none"><b>Courses Filter (can leave blank)</b>
                    <!-- modified name to be separate from rooms and group -->

                    <br>
                    <br>
					You can use AND/OR for below filters (AND/OR will not be applied if only one filter is filled):
					<input type = "radio" name = "AndOr" value = "AND" checked>AND</input>
					<input type = "radio" name = "AndOr" value = "OR">OR</input>

				</span>

				<div class = "ifcoursesFilters" style="display:none">
					Section size:
					<select class = "compareSizeSection">
						<option value="LT">Less than</option>
						<option value="EQ">Equal to</option>
						<option value="GT">Greater than</option>
					</select>
					<input type="number" id="courses_sectionsize" value="">
					<br>
					Department:
					<select class = "isItDep">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>
					</select>
					<input type="text" id="courses_dept" value="">
					<br>
					Course number:
					<select class = "isItCn">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>
					</select>
					<input type="text" id="courses_id" value="">
					<br>
					Instructor:
					<select class = "isItIns">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>

					</select>
					<input type="text" id="courses_instructor" value="">
					<br>
					Title:
					<select class = "isItTit">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>
					</select>
					<input type="text" id="courses_title" value="">
					<br>
                    <br>
				</div>

                <span class = "roomsFilterSchedule radioclass" style="display:none"><b>Room Filters (can leave blank): </b>
                    <!-- Added new banner to represent Room filters banner -->
					<br>
					<br>

					You can use AND/OR for below filters (AND/OR will not be applied if only one filter is filled):
					<input type = "radio" name = "roomsAndOr" value = "AND" checked>AND</input>
                    <input type = "radio" name = "roomsAndOr" value = "OR">OR</input>
                    <br>

				</span>

				<div class = "ifroomsFilters" style="display:none">
                    <br>
					Building name:
					<select class = "isItFullname">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>
					</select>
					<input type="text" id="rooms_fullname" value="">
					<br>
					Room number:
					<select class = "isItNumber">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>
					</select>
					<input type="text" id="rooms_number" value="">
					<br>
					Room size:
					<select class = "compareSizeSize">
						<option value="LT">Less than</option>
						<option value="EQ">Equal to</option>
						<option value="GT">Greater than</option>
					</select>
					<input type="number" id="rooms_seats" value="">
					<br>
					Room type:
					<select class = "isItType">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>
					</select>
					<input type="text" id="rooms_type" value="">
					<br>
					Furniture type:
					<select class = "isItFurniture">
						<option value="IS" selected>IS</option>
						<option value="SW">Starts With</option>
						<option value="EW">Ends With</option>
						<option value="CT">Contains</option>
					</select>
					<input type="text" id="rooms_furniture" value="">
					<br>
					Location (distance from a given building):
					<input type="text" id="rooms_loc" value="">
				</div>

			</p>

			<p>
				<span class = "ifgroup" style="display:none"><b>Show column(s): </b></span>
                <!-- should separate this into different classes for ifcourses and ifrooms -->
				<span class="test">
				<select class = "ifcourses" style="display:none" onchange="columnLeadsGroupBy('ifcourses')">
					<option value="default" selected></option>
					<option value="courses_dept">Department</option>
					<option value="courses_id">Course number</option>
					<option value="courses_avg">Course average</option>
					<option value="courses_instructor">Instructor</option>
					<option value="courses_title">Title</option>
					<option value="courses_pass">Number of passed students</option>
					<option value="courses_fail">Number of failed students</option>
					<option value="coourses_sectionsize">Section size</option>
					<!-- based on no.of passed + failed-->
					<option value="courses_audit">Number of students audited</option>
					<option value="courses_uuid">ID of a course offering</option>
					<option value="courses_year">year</option>
				</select>
				<select class = "ifrooms" style="display:none" onchange="columnLeadsGroupBy('ifrooms')">
					<option value="default" selected></option>
					<option value="rooms_fullname">Building fullname</option>
					<option value="rooms_shortname">Building shortname</option>
					<option value="rooms_number">Room number</option>
					<option value="rooms_name">Room name</option>
					<option value="rooms_address">Building address</option>
					<option value="rooms_lat">Building lat</option>
					<option value="rooms_lon">Building lon</option>
					<option value="rooms_seats">Room size</option>
					<option value="rooms_type">Room type</option>
					<option value="rooms_furniture">Room furniture type</option>
					<option value="rooms_href">Room href</option>
				</select>
					</span>
			<span class = "extra"></span>
				<span class = "ifgroup" style="display:none">
					<button type="button" onclick="clickAddCat()">Add another category</button>
				</span>
			</p>

			<p>
				<span class = "ifgroupGroup" style="display:none"><b>Order by: </b>
				<select class = "direction">
					<option value="choose" selected>Please Choose Direction (if applicable):</option>
					<option value="UP">Ascending</option>
					<option value="DOWN">Descending</option>
				</select>
					<span class = "testOrder">
				<select class = "ifcoursesGroup" style="display:none">
					<option value="default" selected>Please select columns above to show before ordering</option>
				</select>
				<select class = "ifroomsGroup" style="display:none">
					<option value="default" selected>Please select columns above to show before ordering</option>
				</select>
						</span>
					<span class = "extraOrder"></span>
					<button type="button" onclick="clickAddOrd()">Add another order</button>

				</span>
			</p>

			<p>
				<span class = "ifcoursesExtraInfo" style="display:none"><b>Extra Info Available: </b>
				<div class = "ifcoursesApply" style="display:none">
					<input type="checkbox" class="highestavg">Courses With highest Average<br>
					<input type="checkbox" class="lowestavg">Courses With Lowest Average<br>
					<input type="checkbox" class="mostsec">Courses With Most Sections<br>
					<input type="checkbox" class="mostpass">Courses With Most Passes<br>
					<input type="checkbox" class="mostfail">Courses With Most Fails<br>
				</div>
				</span>
			</p>

			<p>
				<span class = "ifgroup" style="display:none">
					<button type="button" onclick="generateData()">Generate Data Table</button>
				</span>
			</p>

		</div>
	</body>
</html>